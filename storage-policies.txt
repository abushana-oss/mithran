STORAGE POLICIES TO CREATE IN SUPABASE DASHBOARD
================================================

After creating the "bom-files" bucket, create these 5 policies:

---
POLICY 1: Upload Files
---
Name: Users can upload files to their own folders
Operation: INSERT
Target roles: authenticated
WITH CHECK:
bucket_id = 'bom-files' AND (storage.foldername(name))[1] = auth.uid()::text

---
POLICY 2: Read Files
---
Name: Users can read files from their own folders
Operation: SELECT
Target roles: authenticated
USING:
bucket_id = 'bom-files' AND (storage.foldername(name))[1] = auth.uid()::text

---
POLICY 3: Update Files
---
Name: Users can update files in their own folders
Operation: UPDATE
Target roles: authenticated
USING:
bucket_id = 'bom-files' AND (storage.foldername(name))[1] = auth.uid()::text
WITH CHECK:
bucket_id = 'bom-files' AND (storage.foldername(name))[1] = auth.uid()::text

---
POLICY 4: Delete Files
---
Name: Users can delete files from their own folders
Operation: DELETE
Target roles: authenticated
USING:
bucket_id = 'bom-files' AND (storage.foldername(name))[1] = auth.uid()::text

---
POLICY 5: Service Role
---
Name: Service role has full access
Operation: ALL
Target roles: service_role
USING:
bucket_id = 'bom-files'
WITH CHECK:
bucket_id = 'bom-files'

---
DONE!
After creating all 5 policies, get your service_role key and share it.
